
<nav class="navbar navbar-toggleable-md navbar-light bg-faded">
  <a class="navbar-brand" href="#">
    <span>Land of the Rair</span>
    <span *ngIf="colyseus.lobby.myAccount">- {{ colyseus.lobby.myAccount.username }}</span>
  </a>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav">
      <li class="nav-item" *ngIf="colyseus.lobby.myAccount" dropdown container="body">
        <a class="nav-link" href="#" dropdownToggle>Game {{ colyseus.isConnected ? '' : '(Disconnected)' }}</a>

        <ul *dropdownMenu class="dropdown-menu">
          <li>
            <a class="dropdown-item" (click)="colyseus.lobby.logout()">Logout</a>
          </li>
        </ul>

      </li>
    </ul>

    <ul class="navbar-nav mr-auto" *ngIf="inGame">
      <li class="nav-item" *ngIf="colyseus.lobby.myAccount" dropdown container="body">
        <a class="nav-link" href="#" dropdownToggle>Windows</a>

        <ul *dropdownMenu class="dropdown-menu">
          <li>
            <a class="dropdown-item" (click)="showStatsWindow = !showStatsWindow">Stats</a>
          </li>
          <li>
            <a class="dropdown-item" (click)="showCommandLine = !showCommandLine">Command Line</a>
          </li>
          <li>
            <a class="dropdown-item" (click)="showInventoryBelt = !showInventoryBelt">Belt</a>
          </li>
          <li>
            <a class="dropdown-item" (click)="showInventorySack = !showInventorySack">Sack</a>
          </li>
          <li>
            <a class="dropdown-item" (click)="showEquipment = !showEquipment">Equipment</a>
          </li>
        </ul>

      </li>
    </ul>
  </div>
</nav>

<div class="window lobby game-window"
     [ng2-draggable]="true"
     [ng2DraggableHandle]="lobbyDrag"
     windowName="lobby"
     defaultX="576"
     defaultY="55"
     [class.minimized]="minimized['lobby']"
     [class.hidden]="!loggedIn">
  <div class="window-header text-center" #lobbyDrag>
    Lobby Chat ({{ colyseus.lobby.lobbyState.accounts.length }} Online)
    <app-minimize-button (click)="minimize('lobby')"></app-minimize-button>
  </div>
  <div class="window-body" [class.hidden]="minimized['lobby']">
    <app-lobby [lobbyState]="colyseus.lobby.lobbyState"></app-lobby>
  </div>
</div>

<div class="window character-select"
     [ng2-draggable]="true"
     [ng2DraggableHandle]="characterSelectDrag"
     windowName="chararacterSelect"
     defaultX="0"
     defaultY="55"
     [class.hidden]="!loggedIn || inGame">
  <div class="window-header text-center" #characterSelectDrag>Character Select</div>
  <div class="window-body">
    <app-character-select [lobbyState]="colyseus.lobby.lobbyState"></app-character-select>
  </div>
</div>

<div class="window map"
     [ng2-draggable]="true"
     [ng2DraggableHandle]="mapDrag"
     windowName="map"
     defaultX="0"
     defaultY="55"
     *ngIf="inGame">
  <div class="window-header text-center" #mapDrag>
    World
    <app-close-button (click)="colyseus.game.quit()"></app-close-button>
  </div>
  <div class="window-body" *ngIf="!colyseus.game.isChangingMap">
    <app-map [clientGameState]="colyseus.game.clientGameState" [currentPlayer]="colyseus.game.character"></app-map>
  </div>
</div>

<div class="window stats above-game-window"
     [ng2-draggable]="true"
     [ng2DraggableHandle]="statsDrag"
     windowName="stats"
     defaultX="670"
     defaultY="120"
     *ngIf="inGame && showStatsWindow">
  <div class="window-header text-center" #statsDrag>
    Stats
    <app-close-button (click)="showStatsWindow = false"></app-close-button>
  </div>
  <div class="window-body">
    <app-stats-window [currentPlayer]="colyseus.game.character"></app-stats-window>
  </div>
</div>

<div class="window command-line game-window"
     [ng2-draggable]="true"
     [ng2DraggableHandle]="commandLine"
     windowName="commandLine"
     defaultX="575"
     defaultY="685"
     *ngIf="inGame && showCommandLine">
  <div class="window-header text-center" #commandLine>
    Command Line
    <app-close-button (click)="showCommandLine = false"></app-close-button>
  </div>
  <div class="window-body">
    <app-command-line [colyseusGame]="colyseus.game"></app-command-line>
  </div>
</div>

<div class="window log-window game-window"
     [ng2-draggable]="true"
     [ng2DraggableHandle]="logWindow"
     windowName="logWindow"
     defaultX="0"
     defaultY="55"
     *ngIf="inGame">
  <div class="window-header text-center" #logWindow>
    Log
  </div>
  <div class="window-body">
    <app-log-window [clientGameState]="colyseus.game.clientGameState"></app-log-window>
  </div>
</div>

<div class="window status-window game-window"
     [ng2-draggable]="true"
     [ng2DraggableHandle]="statusWindow"
     windowName="statusWindow"
     defaultX="0"
     defaultY="656"
     [class.minimized]="minimized['status']"
     *ngIf="inGame">
  <div class="window-header text-center" #statusWindow>
    <app-character-tagline [player]="colyseus.game.character"></app-character-tagline>
    <app-minimize-button (click)="minimize('status')"></app-minimize-button>
  </div>
  <div class="window-body" [class.hidden]="minimized['status']">
    <app-status-window [player]="colyseus.game.character"></app-status-window>
  </div>
</div>

<div class="window ground-window game-window"
     [ng2-draggable]="true"
     [ng2DraggableHandle]="groundWindow"
     windowName="groundWindow"
     defaultX="0"
     defaultY="0"
     *ngIf="inGame && colyseus.game.showGround">
  <div class="window-header text-center" #groundWindow>
    Ground
    <app-close-button (click)="colyseus.game.showGround = false"></app-close-button>
  </div>
  <div class="window-body">
    <app-ground [colyseusGame]="colyseus.game"></app-ground>
  </div>
</div>

<div class="window inventory-sack-window game-window"
     [ng2-draggable]="true"
     [ng2DraggableHandle]="sackWindow"
     windowName="sackWindow"
     *ngIf="inGame && showInventorySack">
  <div class="window-header text-center" #sackWindow>
    Inventory - Sack
    <app-close-button (click)="showInventorySack = false"></app-close-button>
  </div>
  <div class="window-body">
    <app-inventory-sack [player]="colyseus.game.character"></app-inventory-sack>
  </div>
</div>

<div class="window inventory-belt-window game-window"
     [ng2-draggable]="true"
     [ng2DraggableHandle]="beltWindow"
     windowName="beltWindow"
     *ngIf="inGame && showInventoryBelt">
  <div class="window-header text-center" #beltWindow>
    Inventory - Belt
    <app-close-button (click)="showInventoryBelt = false"></app-close-button>
  </div>
  <div class="window-body">
    <app-inventory-belt [player]="colyseus.game.character"></app-inventory-belt>
  </div>
</div>

<div class="window equipment-window game-window"
     [ng2-draggable]="true"
     [ng2DraggableHandle]="equipmentWindow"
     windowName="equipmentWindow"
     *ngIf="inGame && showEquipment">
  <div class="window-header text-center" #equipmentWindow>
    Equipment
    <app-close-button (click)="showEquipment = false"></app-close-button>
  </div>
  <div class="window-body">
    <app-equipment [player]="colyseus.game.character"></app-equipment>
  </div>
</div>
