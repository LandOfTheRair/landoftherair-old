
<nav class="navbar navbar-toggleable-md navbar-light bg-faded">
  <a class="navbar-brand" href="#">
    <span>Land of the Rair</span>
    <span *ngIf="colyseus.lobby.myAccount">- {{ colyseus.lobby.myAccount.username }}</span>
  </a>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav">
      <li class="nav-item" *ngIf="colyseus.lobby.myAccount" dropdown container="body">
        <a class="nav-link" href="#" dropdownToggle>Game {{ colyseus.isConnected ? '' : '(Disconnected)' }}</a>

        <ul *dropdownMenu class="dropdown-menu">
          <li>
            <a class="dropdown-item" (click)="colyseus.lobby.logout()">Logout</a>
          </li>
        </ul>

      </li>
    </ul>

    <ul class="navbar-nav mr-auto" *ngIf="inGame">
      <li class="nav-item" *ngIf="colyseus.lobby.myAccount" dropdown container="body">
        <a class="nav-link" href="#" dropdownToggle>Windows</a>

        <ul *dropdownMenu class="dropdown-menu">
          <li>
            <a class="dropdown-item" (click)="showStatsWindow = !showStatsWindow">Stats</a>
          </li>
          <li>
            <a class="dropdown-item" (click)="showCommandLine = !showCommandLine">Command Line</a>
          </li>
        </ul>

      </li>
    </ul>
  </div>
</nav>

<div class="window lobby game-window"
     [ng2-draggable]="true"
     [ng2DraggableHandle]="lobbyDrag"
     windowName="lobby"
     [class.minimized]="minimized['lobby']"
     [class.hidden]="!loggedIn">
  <div class="window-header text-center" #lobbyDrag>
    Lobby Chat ({{ colyseus.lobby.lobbyState.accounts.length }} Online)
    <app-minimize-button (click)="minimize('lobby')"></app-minimize-button>
  </div>
  <div class="window-body" [class.hidden]="minimized['lobby']">
    <app-lobby [lobbyState]="colyseus.lobby.lobbyState"></app-lobby>
  </div>
</div>

<div class="window character-select"
     [ng2-draggable]="true"
     [ng2DraggableHandle]="characterSelectDrag"
     windowName="chararacterSelect"
     [class.hidden]="!loggedIn || inGame">
  <div class="window-header text-center" #characterSelectDrag>Character Select</div>
  <div class="window-body">
    <app-character-select [lobbyState]="colyseus.lobby.lobbyState"></app-character-select>
  </div>
</div>

<div class="window map"
     [ng2-draggable]="true"
     [ng2DraggableHandle]="mapDrag"
     windowName="map"
     *ngIf="inGame">
  <div class="window-header text-center" #mapDrag>
    World
    <app-close-button (click)="colyseus.game.quit()"></app-close-button>
  </div>
  <div class="window-body">
    <app-map [clientGameState]="colyseus.game.clientGameState" [currentPlayer]="colyseus.game.character"></app-map>
  </div>
</div>

<div class="window stats game-window"
     [ng2-draggable]="true"
     [ng2DraggableHandle]="statsDrag"
     windowName="stats"
     *ngIf="inGame && showStatsWindow">
  <div class="window-header text-center" #statsDrag>
    Stats
    <app-close-button (click)="showStatsWindow = false"></app-close-button>
  </div>
  <div class="window-body">
    <app-stats-window [currentPlayer]="colyseus.game.character"></app-stats-window>
  </div>
</div>

<div class="window command-line game-window"
     [ng2-draggable]="true"
     [ng2DraggableHandle]="commandLine"
     windowName="commandLine"
     *ngIf="inGame && showCommandLine">
  <div class="window-header text-center" #commandLine>
    Command Line
    <app-close-button (click)="showCommandLine = false"></app-close-button>
  </div>
  <div class="window-body">
    <app-command-line [colyseusGame]="colyseus.game"></app-command-line>
  </div>
</div>

